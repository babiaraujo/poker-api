<h1>WebSocket conectado?</h1>
<p id="status">ğŸ”„ Tentando conectar...</p>

<script>
  console.log("ğŸ” Script carregado!");

  document.addEventListener("DOMContentLoaded", function () {
    console.log("ğŸ“¦ DOM carregado");

    const statusEl = document.getElementById("status");

    if (typeof ActionCable === "undefined") {
      statusEl.textContent = "âŒ ActionCable nÃ£o carregou";
      console.error("âŒ ActionCable nÃ£o estÃ¡ definido");
      return;
    }

    const cable = ActionCable.createConsumer("ws://localhost:3000/cable");

    cable.subscriptions.create(
      { channel: "RoomChannel", room_id: 1 },
      {
        connected() {
          statusEl.textContent = "âœ… Conectado!";
          console.log("ğŸ“¡ Conectado ao canal RoomChannel");
        },
        disconnected() {
          statusEl.textContent = "ğŸ”Œ Desconectado.";
        },
        received(data) {
          console.log("ğŸ“¨ Recebido:", data);
        }
      }
    );
  });
</script>
