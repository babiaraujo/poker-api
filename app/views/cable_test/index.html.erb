<h1>WebSocket conectado?</h1>
<p id="status">🔄 Tentando conectar...</p>

<script>
  console.log("🔍 Script carregado!");

  document.addEventListener("DOMContentLoaded", function () {
    console.log("📦 DOM carregado");

    const statusEl = document.getElementById("status");

    if (typeof ActionCable === "undefined") {
      statusEl.textContent = "❌ ActionCable não carregou";
      console.error("❌ ActionCable não está definido");
      return;
    }

    const cable = ActionCable.createConsumer("ws://localhost:3000/cable");

    cable.subscriptions.create(
      { channel: "RoomChannel", room_id: 1 },
      {
        connected() {
          statusEl.textContent = "✅ Conectado!";
          console.log("📡 Conectado ao canal RoomChannel");
        },
        disconnected() {
          statusEl.textContent = "🔌 Desconectado.";
        },
        received(data) {
          console.log("📨 Recebido:", data);
        }
      }
    );
  });
</script>
